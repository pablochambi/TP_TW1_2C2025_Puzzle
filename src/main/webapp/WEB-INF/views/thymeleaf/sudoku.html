<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Sudoku</title>
  <link rel="stylesheet" th:href="@{/css/sudoku.css}"/>
</head>
<body>
<h2>Sudoku Puzzle</h2>

<table id="puzzle">
  <tbody>
  <tr th:each="row, rowStat : ${sudoku.puzzle}">
    <td th:each="cell, colStat : ${row}"
        th:utext="${cell != null ? cell : '<input type=&quot;text&quot; maxlength=&quot;1&quot;>'}">
    </td>
  </tr>
  </tbody>
</table>

<div style="text-align:center; margin: 20px;">
  <button onclick="checkSolution()">Verificar</button>
  <button onclick="showSolution()">Mostrar soluci√≥n</button>
</div>

<h2>Sudoku Solution</h2>

<table id="solution" style="display:none;">
  <tbody>
  <tr th:each="row : ${sudoku.solution}">
    <td th:each="cell : ${row}" th:text="${cell}"></td>
  </tr>
  </tbody>
</table>

<script>
  function checkSolution() {
    const puzzleTable = document.getElementById("puzzle");
    const solutionTable = document.getElementById("solution");

    const puzzleRows = puzzleTable.getElementsByTagName("tr");
    const solutionRows = solutionTable.getElementsByTagName("tr");

    let allCorrect = true;

    for (let i = 0; i < puzzleRows.length; i++) {
      const puzzleCells = puzzleRows[i].getElementsByTagName("td");
      const solutionCells = solutionRows[i].getElementsByTagName("td");

      for (let j = 0; j < puzzleCells.length; j++) {
        const input = puzzleCells[j].querySelector("input");
        if (input) {
          const userValue = input.value;
          const correctValue = solutionCells[j].innerText;
          if (userValue === correctValue) {
            input.classList.add("correct");
            input.classList.remove("wrong");
          } else {
            input.classList.add("wrong");
            input.classList.remove("correct");
            allCorrect = false;
          }
        }
      }
    }

    if (allCorrect) {
      alert("üéâ ¬°Felicitaciones! Sudoku resuelto correctamente üéâ");
    }
  }

  function showSolution() {
    document.getElementById("solution").style.display = "table";
  }
</script>

</body>
</html>